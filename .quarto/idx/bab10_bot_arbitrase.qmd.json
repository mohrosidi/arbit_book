{"title":"Membangun Bot Pertamamu","markdown":{"headingText":"Membangun Bot Pertamamu","containsRefs":false,"markdown":"\nSelamat! Anda telah menuntaskan seluruh materi teori dalam buku ini. Namun, di pasar kripto yang beroperasi 24/7 dengan volatilitas tinggi, mata manusia tidak akan sanggup memantau peluang yang muncul hanya dalam hitungan detik.\n\nKecepatan adalah mata uang utama dalam arbitrase. Dalam bab penutup ini, kita akan mentransformasi pengetahuan Anda menjadi sebuah alat otomatis: **Bot Arbitrase Segitiga**. Kita akan menggunakan Python sebagai bahasa pemrograman, CCXT sebagai jembatan ke bursa, dan AI sebagai asisten teknis Anda.\n\n## Persiapan Infrastruktur (The Toolbox)\n\nSebelum masuk ke kode, siapkan ekosistem pengembangan Anda:\n\n1.  **Python 3.10+**: Bahasa yang ramah pemula namun sangat bertenaga untuk data keuangan.\n\n2.  **Visual Studio Code (VS Code)**: Editor teks standar industri.\n\n3.  **Library CCXT**: Library wajib yang menyatukan ratusan API bursa (Binance, Bybit, dll) ke dalam satu format perintah yang seragam.\n\n4.  **Python-dotenv**: Untuk menyembunyikan kunci rahasia (API Key) Anda dari publik.\n\n5.  **Akun Bursa & API Key**: Disarankan menggunakan **Testnet** (akun demo) terlebih dahulu untuk menghindari risiko kehilangan modal saat belajar.\n\n## Strategi Prompt Engineering: Memandu AI Membangun Bot\n\nJangan meminta AI membuat bot dalam satu perintah besar. Gunakan metode **Modular Prompting** agar kode yang dihasilkan lebih rapi dan minim *bug*. Berikut urutan *prompt* yang bisa Anda gunakan pada Gemini atau ChatGPT:\n\n-   **Prompt Fondasi:** *\"Saya ingin membangun bot Triangular Arbitrage di Binance menggunakan Python dan CCXT. Tolong buatkan struktur Class utama yang bisa membaca API Key dari file .env.\"*\n\n-   **Prompt Logika:** *\"Tambahkan fungsi untuk memantau harga bid/ask dari tiga pasangan koin (misal: BTC/USDT, ETH/BTC, dan ETH/USDT) secara simultan.\"*\n\n-   **Prompt Eksekusi:** *\"Buat fungsi perhitungan profit yang sudah menyertakan potongan fee transaksi sebesar 0.1% di setiap langkahnya.\"*\n\n## Implementasi Kode Utama\n\nBerikut adalah kode bot yang telah kita optimasi. Silakan salin ke file bernama `bot_arbitrase.py`.\n\n``` python\nimport ccxt\nimport time\nimport os\nfrom dotenv import load_dotenv\n\n# 1. LOAD KONFIGURASI KEAMANAN\nload_dotenv()\nAPI_KEY = os.getenv('BINANCE_API_KEY')\nAPI_SECRET = os.getenv('BINANCE_API_SECRET')\n\nclass ArbitrageBot:\n    def __init__(self):\n        # Inisialisasi Bursa\n        self.exchange = ccxt.binance({\n            'apiKey': API_KEY,\n            'apiSecret': API_SECRET,\n            'enableRateLimit': True,\n        })\n        self.investment_amount = 100  # Modal awal (USDT)\n        self.min_profit_target = 0.2  # Target profit minimal (%)\n        self.fee = 0.001              # Estimasi fee 0.1% per transaksi\n\n    def get_prices(self):\n        \"\"\"Mengambil data harga bid/ask untuk rute segitiga\"\"\"\n        try:\n            # Rute: USDT -> BTC -> ETH -> USDT\n            tickers = self.exchange.fetch_tickers(['BTC/USDT', 'ETH/BTC', 'ETH/USDT'])\n            return {\n                'step1': tickers['BTC/USDT']['ask'], # Harga beli BTC\n                'step2': tickers['ETH/BTC']['ask'],  # Harga beli ETH menggunakan BTC\n                'step3': tickers['ETH/USDT']['bid']  # Harga jual ETH ke USDT\n            }\n        except Exception as e:\n            print(f\"Gagal mengambil harga: {e}\")\n            return None\n\n    def calculate_profit(self, prices):\n        \"\"\"Menghitung potensi hasil akhir\"\"\"\n        # Langkah 1: USDT ke BTC (Beli di harga Ask)\n        btc_bought = (self.investment_amount / prices['step1']) * (1 - self.fee)\n        \n        # Langkah 2: BTC ke ETH (Beli di harga Ask)\n        eth_bought = (btc_bought / prices['step2']) * (1 - self.fee)\n        \n        # Langkah 3: ETH kembali ke USDT (Jual di harga Bid)\n        final_usdt = (eth_bought * prices['step3']) * (1 - self.fee)\n        \n        profit_pct = ((final_usdt - self.investment_amount) / self.investment_amount) * 100\n        return final_usdt, profit_pct\n\n    def run(self):\n        print(\"--- Bot Arbitrase Aktif & Memindai Peluang ---\")\n        while True:\n            prices = self.get_prices()\n            if prices:\n                final_amount, profit_pct = self.calculate_profit(prices)\n                \n                if profit_pct > self.min_profit_target:\n                    print(f\"!!! PELUANG PROFIT: {profit_pct:.3f}% | Hasil: {final_amount:.2f} USDT\")\n                else:\n                    print(f\"Scanning... Profit saat ini: {profit_pct:.3f}%\", end='\\r')\n            \n            time.sleep(2) \n\nif __name__ == \"__main__\":\n    bot = ArbitrageBot()\n    bot.run()\n```\n\n------------------------------------------------------------------------\n\n## Bedah Kode: Memahami Setiap Baris\n\nUntuk menjadi pengembang bot yang handal, Anda harus memahami logika di balik kode tersebut. Berikut adalah penjelasannya:\n\n### A. Library dan Keamanan (`Imports & Dotenv`)\n\n-   **`import ccxt`**: Ini adalah \"jembatan\" utama. CCXT memungkinkan bot berbicara dengan API bursa (Binance, Bybit, dll) tanpa kita harus menulis kode API manual yang rumit.\n-   **`load_dotenv()`**: Baris ini memerintahkan Python untuk mencari file tersembunyi bernama `.env`. Di sanalah kita menyimpan `API_KEY` agar tidak terlihat oleh orang lain. **Jangan pernah menulis API Key langsung di dalam script utama.**\n\n### B. Inisialisasi (`__init__`)\n\n-   **`enableRateLimit: True`**: Setiap bursa punya aturan seberapa cepat kita boleh meminta data. Jika terlalu cepat, IP Anda akan diblokir. Fitur ini memastikan bot kita \"sopan\" dan mengikuti aturan bursa secara otomatis.\n-   **`self.investment_amount`**: Kita menetapkan modal virtual untuk simulasi hitungan.\n\n### C. Pengambilan Data (`get_prices`)\n\n-   **Ask vs Bid**: Ini adalah bagian paling krusial.\n    -   Saat kita ingin **membeli**, kita melihat harga **Ask** (harga terendah yang diminta penjual).\n    -   Saat kita ingin **menjual**, kita melihat harga **Bid** (harga tertinggi yang ditawarkan pembeli).\n-   Bot mengambil tiga harga sekaligus untuk meminimalkan jeda waktu (latency).\n\n### D. Logika Perhitungan Profit (`calculate_profit`)\n\nDalam arbitrase segitiga, kita melakukan \"perjalanan\" koin: 1. **Langkah 1**: Mengonversi USDT ke BTC. Rumus: `Modal / Harga Ask BTC`. 2. **Langkah 2**: Mengonversi BTC ke ETH. Rumus: `Jumlah BTC / Harga Ask ETH/BTC`. 3. **Langkah 3**: Mengonversi ETH kembali ke USDT. Rumus: `Jumlah ETH * Harga Bid ETH/USDT`. \\* **Potongan Fee**: Di setiap langkah, kita mengalikan dengan `(1 - self.fee)`. Jika fee bursa 0.1%, maka kita hanya memiliki 99.9% dari aset asli setelah transaksi. Banyak pemula lupa menghitung ini dan akhirnya merugi.\n\n### E. Siklus Berulang (`run`)\n\n-   **`while True`**: Ini membuat bot berjalan selamanya sampai kita menghentikannya secara manual.\n-   **`time.sleep(2)`**: Memberikan jeda 2 detik sebelum memindai ulang. Tanpa jeda, komputer Anda akan bekerja terlalu keras dan API bursa mungkin akan memutuskan koneksi Anda.\n\n------------------------------------------------------------------------\n\n## Tips Mengoptimalkan Bot dengan AI\n\nSetelah memahami dasar-dasarnya, Anda bisa meminta bantuan AI untuk meningkatkan kemampuan bot ini dengan instruksi (prompt) berikut:\n\n1.  **Menangani Error Koneksi**: *\"Tambahkan logika 'retry' pada fungsi get_prices jika internet terputus agar bot tidak berhenti tiba-tiba.\"*\n2.  **Logika Eksekusi Nyata**: *\"Buat fungsi execute_trade yang menggunakan `create_order` dari CCXT untuk mengeksekusi tiga transaksi tersebut secara berurutan hanya jika profit \\> 0.2%.\"*\n3.  **Manajemen Slippage**: *\"Modifikasi perhitungan agar menggunakan harga dari Order Book kedalaman 5, bukan hanya harga ticker terakhir.\"*\n\n------------------------------------------------------------------------\n\n## Penutup: Etika dan Disiplin\n\nArbitrase adalah tentang ketelitian. Dengan memahami setiap baris kode di atas, Anda bukan lagi sekadar pengguna, melainkan seorang **Arsitek Sistem**. Gunakan pemahaman ini untuk terus bereksperimen di akun demo sebelum benar-benar terjun ke pasar nyata.\n\n**Selamat membangun dan teruslah belajar!**\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"bab10_bot_arbitrase.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","theme":["cosmo","brand"]},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"lualatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"bab10_bot_arbitrase.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}