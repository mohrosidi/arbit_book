{"title":"Triangular Arbitrage (Intra-Exchange)","markdown":{"headingText":"Triangular Arbitrage (Intra-Exchange)","containsRefs":false,"markdown":"\nPada bab sebelumnya, kita telah membedah Spatial Arbitrage, sebuah strategi yang mengeksploitasi perbedaan harga antara dua bursa yang berbeda. Meskipun strategi tersebut menawarkan peluang yang besar, ia memiliki tantangan logistik yang nyata: risiko waktu transfer on-chain, biaya penarikan (withdrawal fees), dan potensi pembekuan dana saat dompet bursa sedang dalam pemeliharaan.\n\nSekarang, kita masuk ke strategi yang lebih gesit: Triangular Arbitrage. Berbeda dengan Spatial, strategi ini dilakukan sepenuhnya di dalam satu bursa tunggal (Intra-Exchange). Di sini, kita tidak melawan jarak fisik antar server bursa, melainkan melawan ketidakharmonisan harga antara tiga pasangan aset yang membentuk siklus tertutup. Dengan menggunakan USDT sebagai jangkar, kita akan mempelajari bagaimana menemukan \"siklus negatif\" yang memungkinkan kita menambah saldo tanpa pernah mengeluarkan aset dari satu akun bursa.\n\n## Mekanisme: Anatomi Putaran Intra-Exchange\n\nTriangular arbitrage memanfaatkan inefisiensi dalam satu bursa. Keuntungan utamanya adalah meniadakan risiko transfer on-chain dan latensi jaringan yang biasanya terjadi pada pengiriman antar bursa.\n\n### Struktur Siklus 3 Aset\n\nSiklus ini melibatkan tiga pasangan mata uang yang membentuk lingkaran tertutup. Contoh standar menggunakan USDT sebagai basis:\n\n-   Aset A (Base): USDT\n\n-   Aset B: BTC\n\n-   Aset C: ETH\n\n**Alur Kerja Transaksi:**\n\n-   $A \\to B$ (Beli BTC dengan USDT) - Menggunakan harga ASK BTC/USDT.\n\n-   $B \\to C$ (Beli ETH dengan BTC) - Menggunakan harga ASK ETH/BTC.\n\n-   $C \\to A$ (Jual ETH ke USDT) - Menggunakan harga BID ETH/USDT.\n\n## Matematika: Presisi Logaritmik dan Fee\n\n### Kondisi Arbitrase dengan Fee\n\nBanyak trader pemula melupakan bahwa setiap transaksi dikenakan trading fee. Jika fee bursa adalah $0.1\\%$ ($0.001$), maka efisiensi setiap transaksi adalah $(1 - 0.001) = 0.999$.\n\n**Kondisi profit murni adalah**:\n\n$$(Rate_1 \\times Rate_2 \\times Rate_3) \\times (1 - Fee)^3 > 1$$\n\n**Penjelasan Persamaan:**\n\n-   $Rate_n$: Nilai tukar aset pada setiap langkah (misal: jumlah BTC yang didapat per 1 USDT).\n\n-   $(1 - Fee)^3$: Karena kita melakukan 3 transaksi, modal kita akan \"dipotong\" sebanyak 3 kali oleh bursa.\n\n> **Logika**: Hasil kali dari semua kurs dan sisa modal setelah dipotong biaya harus lebih besar dari **1**. Jika hasilnya adalah 1.005, berarti Anda mendapatkan profit bersih sebesar $0.5\\%$.\n\n### Transformasi Logaritma untuk HFT\n\nDalam sistem High-Frequency Trading (HFT), operasi perkalian lebih lambat daripada penjumlahan. Kita menggunakan logaritma natural ($\\ln$) untuk mengubah masalah ini menjadi pencarian jalur terpendek dalam graf.\n\n**Mencari**:\n\n$$\\ln(Rate_1) + \\ln(Rate_2) + \\ln(Rate_3) + 3 \\times \\ln(1 - Fee) > 0$$\n\n**Penjelasan Persamaan:**\n\n-   Berdasarkan hukum logaritma, $\\ln(a \\times b) = \\ln(a) + \\ln(b)$.\n\n-   Kita mengubah target profit dari \"lebih besar dari 1\" menjadi \"lebih besar dari 0\".\n\n-   Ini memungkinkan bot untuk memproses ribuan pasangan aset hanya dengan operasi penjumlahan sederhana, yang sangat krusial dalam perlombaan milidetik.\n\nJika kita mengubah nilai tersebut menjadi negatif:\n\n$$-[\\ln(Rate_1) + \\ln(Rate_2) + \\ln(Rate_3) + 3 \\times \\ln(1 - Fee)] < 0$$\n\nInilah yang disebut sebagai Negative Cycle.\n\n## Teori Graf: Implementasi Bellman-Ford\n\nBursa dipresentasikan sebagai Directed Graph (Graf Berarah).\n\n-   **Node**: Mata uang (BTC, ETH, dsb).\n\n-   **Edge Weight**: $-\\ln(Rate \\times (1 - Fee))$.\n\n### Pseudo-code Deteksi Jalur Optimal\n\n``` python\nimport math\n\ndef detect_triangular_arbitrage(graph, start_node): \\# Jarak diinisialisasi ke tak terhingga distances = {node: float('inf') for node in graph} distances\\[start_node\\] = 0 predecessor = {node: None for node in graph}\n\n# Relaksasi Edges (V-1 kali)\nfor _ in range(len(graph) - 1):\n    for u, v, weight in graph.edges:\n        # weight di sini adalah -ln(rate)\n        if distances[u] + weight < distances[v]:\n            distances[v] = distances[u] + weight\n            predecessor[v] = u\n\n# Deteksi Siklus Negatif\nfor u, v, weight in graph.edges:\n    if distances[u] + weight < distances[v]:\n        # Siklus negatif ditemukan, rekonstruksi jalur\n        path = []\n        curr = v\n        while curr not in path:\n            path.append(curr)\n            curr = predecessor[curr]\n        path.append(curr)\n        return path[::-1] # Jalur arbitrase ditemukan\nreturn None\n```\n\n## Strategi Eksekusi: Menghadapi Realitas Pasar\n\n### Partial Fills & Order Types\n\nMasalah terbesar adalah jika langkah 1 dan 2 berhasil, tapi langkah 3 gagal karena harga bergerak.\n\nSolusi: Gunakan order FOK (Fill or Kill) atau IOC (Immediate or Cancel). Jangan gunakan Limit Order biasa yang bisa \"nyangkut\" di buku pesanan.\n\n### Rebalancing & Inventory\n\nSetelah melakukan arbitrase segitiga, jumlah aset di dompet Anda akan berubah (misal: saldo BTC bertambah, USDT berkurang). Bot profesional memiliki modul Auto-Rebalancing untuk menukar kembali profit ke mata uang dasar secara berkala.\n\n## Analisis Risiko: Mengapa Anda Bisa Rugi?\n\n-   **Latensi API**: Data harga yang Anda terima sudah usang saat order dikirim.\n\n-   **Slippage Kumulatif**: Volume di langkah ketiga (ETH/USDT) tidak cukup besar untuk menampung seluruh dana hasil dari langkah kedua.\n\n**Taker vs Maker**: Jika Anda menggunakan Market Order (Taker), biaya jauh lebih mahal. Strategi ini harus dihitung dengan Taker Fee.\n\n## Studi Kasus: New Listing Inefficiency\n\nSaat koin baru baru saja terdaftar (Listed) di bursa, seringkali pasangan trading utamanya (misal: COIN/USDT) bergerak lebih cepat daripada pasangan sekundernya (misal: COIN/BTC). Di sinilah peluang Triangular Arbitrage paling sering muncul dengan spread mencapai $0.5\\% - 1\\%$.\n\n## Daftar Pustaka:\n\n-   Billingsley, R. S. (2006). Understanding Arbitrage.\n\n-   Cormen, T. H. Introduction to Algorithms (Bellman-Ford Analysis).\n\n-   Market Microstructure Theory regarding FIFO Matching Engines.\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"bab4_triangular_arbitrage.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","theme":["cosmo","brand"]},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"lualatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"bab4_triangular_arbitrage.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}